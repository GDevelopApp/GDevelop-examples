{
  "firstLayout": "",
  "gdVersion": {
    "build": 99,
    "major": 4,
    "minor": 0,
    "revision": 0
  },
  "properties": {
    "adaptGameResolutionAtRuntime": true,
    "folderProject": false,
    "orientation": "landscape",
    "packageName": "com.planktonfun.voicerecognition",
    "pixelsRounding": false,
    "projectUuid": "fb0a8fc2-53a9-42bd-9731-9749592d5bea",
    "scaleMode": "linear",
    "sizeOnStartupMode": "",
    "templateSlug": "",
    "useExternalSourceFiles": false,
    "version": "1.0.0",
    "name": "Voice recognition Example",
    "description": "A demo for using voice recognition in gdevelop, useful for a developer looking to make voice based games/apps.",
    "author": "",
    "windowWidth": 800,
    "windowHeight": 600,
    "latestCompilationDirectory": "",
    "maxFPS": 60,
    "minFPS": 20,
    "verticalSync": false,
    "platformSpecificAssets": {},
    "loadingScreen": {
      "backgroundColor": 0,
      "backgroundFadeInDuration": 0.2,
      "backgroundImageResourceName": "",
      "gdevelopLogoStyle": "light",
      "logoAndProgressFadeInDuration": 0.2,
      "logoAndProgressLogoFadeInDelay": 0.2,
      "minDuration": 1.5,
      "progressBarColor": 16777215,
      "progressBarHeight": 20,
      "progressBarMaxWidth": 200,
      "progressBarMinWidth": 40,
      "progressBarWidthPercent": 30,
      "showGDevelopSplash": true,
      "showProgressBar": true
    },
    "authorIds": [
      "rotBq28wITdtfsrE7McHQri4k2w2"
    ],
    "categories": [],
    "playableDevices": [],
    "extensionProperties": [],
    "platforms": [
      {
        "name": "GDevelop JS platform"
      }
    ],
    "currentPlatform": "GDevelop JS platform"
  },
  "resources": {
    "resources": [
      {
        "alwaysLoaded": false,
        "file": "assets/Start button.png",
        "kind": "image",
        "metadata": "",
        "name": "Start button.png",
        "smoothed": true,
        "userAdded": false,
        "origin": {
          "identifier": "https://resources.gdevelop-app.com/assets/On-Screen Controls/Sprites/Flat Dark/Start button.png",
          "name": "gdevelop-asset-store"
        }
      }
    ],
    "resourceFolders": []
  },
  "objects": [],
  "objectsGroups": [],
  "variables": [],
  "layouts": [
    {
      "b": 209,
      "disableInputWhenNotFocused": true,
      "mangledName": "Main",
      "name": "Main",
      "oglFOV": 90,
      "oglZFar": 500,
      "oglZNear": 1,
      "r": 209,
      "standardSortMethod": true,
      "stopSoundsOnStartup": true,
      "title": "",
      "v": 209,
      "uiSettings": {
        "grid": false,
        "gridType": "rectangular",
        "gridWidth": 32,
        "gridHeight": 32,
        "gridOffsetX": 0,
        "gridOffsetY": 0,
        "gridColor": 10401023,
        "gridAlpha": 0.8,
        "snap": false,
        "zoomFactor": 0.8399999999999999,
        "windowMask": false
      },
      "objectsGroups": [],
      "variables": [],
      "instances": [
        {
          "angle": 0,
          "customSize": true,
          "height": 96,
          "layer": "",
          "locked": false,
          "name": "VoiceRecognitionStatusText",
          "persistentUuid": "54a9cf18-3d55-4ac7-969a-5f4c8f876b98",
          "width": 324,
          "x": 257,
          "y": 234,
          "zOrder": 3,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": false,
          "height": 0,
          "layer": "",
          "locked": false,
          "name": "Instruction",
          "persistentUuid": "33c34643-ddcc-4c89-9704-76c8ec96d7df",
          "width": 0,
          "x": 22,
          "y": 38,
          "zOrder": 4,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": false,
          "height": 0,
          "layer": "",
          "locked": false,
          "name": "StartButton",
          "persistentUuid": "74224143-b28c-4a12-802b-58d28c13cf95",
          "width": 0,
          "x": 343,
          "y": 378,
          "zOrder": 5,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        }
      ],
      "objects": [
        {
          "assetStoreId": "",
          "bold": false,
          "italic": false,
          "name": "VoiceRecognitionStatusText",
          "smoothed": true,
          "tags": "",
          "type": "TextObject::Text",
          "underlined": false,
          "variables": [
            {
              "folded": true,
              "name": "text",
              "type": "string",
              "value": "hello there, please press space to start"
            }
          ],
          "effects": [],
          "behaviors": [],
          "string": "to start listening press start",
          "font": "",
          "characterSize": 20,
          "color": {
            "b": 0,
            "g": 0,
            "r": 0
          }
        },
        {
          "assetStoreId": "",
          "bold": false,
          "italic": false,
          "name": "Instruction",
          "smoothed": true,
          "tags": "",
          "type": "TextObject::Text",
          "underlined": false,
          "variables": [],
          "effects": [],
          "behaviors": [],
          "string": "Caveats: Voice recognition is only supported in https for security\nInstruction: To test this click publish -> generate link -> open the link",
          "font": "",
          "characterSize": 20,
          "color": {
            "b": 0,
            "g": 0,
            "r": 0
          }
        },
        {
          "assetStoreId": "a5f25aefb989f5bf860c66e9cbdee237e4bcf7abb62a312d3fb46646352edb70",
          "name": "StartButton",
          "tags": "",
          "type": "Sprite",
          "updateIfNotVisible": false,
          "variables": [],
          "effects": [],
          "behaviors": [],
          "animations": [
            {
              "name": "",
              "useMultipleDirections": false,
              "directions": [
                {
                  "looping": true,
                  "timeBetweenFrames": 0.02500000037252903,
                  "sprites": [
                    {
                      "hasCustomCollisionMask": false,
                      "image": "Start button.png",
                      "points": [],
                      "originPoint": {
                        "name": "origine",
                        "x": 0,
                        "y": 0
                      },
                      "centerPoint": {
                        "automatic": true,
                        "name": "centre",
                        "x": 0,
                        "y": 0
                      },
                      "customCollisionMask": []
                    }
                  ]
                }
              ]
            }
          ]
        }
      ],
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "DepartScene"
              },
              "parameters": [
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "VoiceRecognition::StartListening"
              },
              "parameters": [
                "",
                "\"en-US (English)\"",
                ""
              ]
            },
            {
              "type": {
                "value": "TextObject::String"
              },
              "parameters": [
                "VoiceRecognitionStatusText",
                "=",
                "VoiceRecognition::RetrieveStatus()"
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "SourisSurObjet"
              },
              "parameters": [
                "StartButton",
                "Left",
                "",
                ""
              ]
            },
            {
              "type": {
                "value": "MouseButtonReleased"
              },
              "parameters": [
                "",
                "Left"
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "VoiceRecognition::StartListening"
              },
              "parameters": [
                "",
                "\"en-US (English)\"",
                ""
              ]
            },
            {
              "type": {
                "value": "TextObject::String"
              },
              "parameters": [
                "VoiceRecognitionStatusText",
                "=",
                "VoiceRecognition::RetrieveStatus()"
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "VoiceRecognition::OnError"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "TextObject::String"
              },
              "parameters": [
                "VoiceRecognitionStatusText",
                "=",
                "VoiceRecognition::RetrieveError()"
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "VoiceRecognition::OnSuccess"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "TextObject::String"
              },
              "parameters": [
                "VoiceRecognitionStatusText",
                "=",
                "VoiceRecognition::RetrievetResultText()"
              ]
            }
          ]
        }
      ],
      "layers": [
        {
          "ambientLightColorB": 32,
          "ambientLightColorG": 0,
          "ambientLightColorR": 0,
          "followBaseLayerCamera": false,
          "isLightingLayer": false,
          "name": "",
          "visibility": true,
          "cameras": [
            {
              "defaultSize": true,
              "defaultViewport": true,
              "height": 0,
              "viewportBottom": 1,
              "viewportLeft": 0,
              "viewportRight": 1,
              "viewportTop": 0,
              "width": 0
            }
          ],
          "effects": []
        }
      ],
      "behaviorsSharedData": []
    }
  ],
  "externalEvents": [],
  "eventsFunctionsExtensions": [
    {
      "author": "",
      "category": "Device",
      "description": "Listens from the browser microphone then returns a text\n\nLimitations: Voice recognition is only supported in https for security reasons\n\nCan be used for:\n   - Voice Based Games\n   - Voice Mobile App\n\nFeatures:\n\tConditions:\n\t\t- OnSuccess\n\t\t- OnError\n\n\tActions:\n                - Change Language\n\t\t- Start listening\n\n\tStringExpressions:\n\t\t- RetrieveResultText\n\t\t- RetrieveStatus\n\t\t- RetrieveError",
      "extensionNamespace": "",
      "fullName": "Voice Recognition API",
      "helpPath": "https://developer.mozilla.org/en-US/docs/Web/API/Web_Speech_API/Using_the_Web_Speech_API",
      "iconUrl": "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iSWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8Zz4NCgk8cGF0aCBkPSJNMTMsMTZjMCwwLjYtMC40LDEtMSwxSDljMC4xLDIuOCwyLjQsNSw1LjIsNWgzLjdjMi44LDAsNS4xLTIuMiw1LjItNWgtN2MtMC42LDAtMS0wLjQtMS0xczAuNC0xLDEtMWg3di0yaC03DQoJCWMtMC42LDAtMS0wLjQtMS0xczAuNC0xLDEtMWg3VjloLTdjLTAuNiwwLTEtMC40LTEtMXMwLjQtMSwxLTFoN2MtMC4xLTIuOC0yLjQtNS01LjItNWgtMy43QzExLjQsMiw5LjEsNC4yLDksN2gzYzAuNiwwLDEsMC40LDEsMQ0KCQlzLTAuNCwxLTEsMUg5djJoM2MwLjYsMCwxLDAuNCwxLDFzLTAuNCwxLTEsMUg5djJoM0MxMi42LDE1LDEzLDE1LjQsMTMsMTZ6Ii8+DQoJPHBhdGggZD0iTTI4LDExaC0yYy0wLjYsMC0xLDAuNC0xLDF2NC44YzAsMy45LTMuMiw3LjItNy4yLDcuMmgtMy43QzEwLjIsMjQsNywyMC44LDcsMTYuOFYxMmMwLTAuNi0wLjQtMS0xLTFINGMtMC42LDAtMSwwLjQtMSwxDQoJCXMwLjQsMSwxLDFoMXYzLjhjMCw1LDQuMSw5LjIsOS4yLDkuMmgzLjdjNSwwLDkuMi00LjEsOS4yLTkuMlYxM2gxYzAuNiwwLDEtMC40LDEtMVMyOC42LDExLDI4LDExeiIvPg0KCTxwYXRoIGQ9Ik0yMi40LDI4LjFjLTEuOC0wLjctNC0xLjEtNi40LTEuMXMtNC41LDAuNC02LjQsMS4xYy0wLjUsMC4yLTAuOCwwLjgtMC42LDEuM2MwLjIsMC41LDAuOCwwLjgsMS4zLDAuNg0KCQljMy4yLTEuMiw4LjEtMS4yLDExLjMsMGMwLjEsMCwwLjIsMC4xLDAuNCwwLjFjMC40LDAsMC44LTAuMiwwLjktMC42QzIzLjEsMjguOCwyMi45LDI4LjMsMjIuNCwyOC4xeiIvPg0KPC9nPg0KPC9zdmc+DQo=",
      "name": "VoiceRecognition",
      "previewIconUrl": "https://resources.gdevelop-app.com/assets/Icons/Glyphster Pack/Master/SVG/Music/Music_microphone_sing_voice_studio_record_vintage.svg",
      "shortDescription": "Converts voice to text.",
      "version": "0.1.0",
      "tags": [
        "network",
        "voicetotext"
      ],
      "authorIds": [
        "rotBq28wITdtfsrE7McHQri4k2w2"
      ],
      "dependencies": [],
      "eventsFunctions": [
        {
          "description": "",
          "fullName": "",
          "functionType": "Action",
          "group": "",
          "name": "onFirstSceneLoaded",
          "private": false,
          "sentence": "",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": []
            },
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "function VoiceRecognition() {\n    this.errorStatus = false;\n    this.successStatus = false;\n\n    this.setStatus = function (status) {\n        this.status = status;\n    }\n\n    this.setError = function (error) {\n        this.error = error;\n    }\n\n    this.setResultText = function (result) {\n        this.result = result;\n    }\n\n    this.getResultText = function () {\n        return this.result;\n    }\n\n    this.getStatus = function () {\n        return this.status;\n    }\n\n    this.getError = function () {\n        return this.error;\n    }\n\n    this.setLanguage = function (lang) {\n        this.recognition.lang = lang;\n    }\n\n    let parent = this;\n\n    var SpeechRecognition = SpeechRecognition || webkitSpeechRecognition\n    var SpeechGrammarList = SpeechGrammarList || window.webkitSpeechGrammarList\n    var SpeechRecognitionEvent = SpeechRecognitionEvent || webkitSpeechRecognitionEvent\n\n    this.recognition = new SpeechRecognition();\n\n    this.recognition.continuous = false;\n    this.recognition.interimResults = false;\n    this.recognition.maxAlternatives = 1;\n\n    // This runs when the speech recognition service starts\n    this.recognition.onstart = function() {\n        parent.setStatus(\"listening, please speak...\");\n    };\n\n    this.recognition.onspeechend = function() {\n        this.recognition.stop();\n    }\n\n    this.recognition.onerror = function(event) {\n        parent.errorStatus = true;\n        parent.setError('Error occurred in recognition: ' + event.error);\n    }\n\n    // This runs when the speech recognition service returns result\n    this.recognition.onresult = function(event) {\n        var transcript = event.results[0][0].transcript;\n        var confidence = event.results[0][0].confidence;\n\n        parent.successStatus = true;\n        parent.confidence = confidence;\n        parent.setResultText(transcript);\n    };\n\n    // start recognition\n    this.startListening = function() {\n        this.recognition.start();\n        \n        parent.errorStatus = false;\n        parent.successStatus = false;\n        parent.setStatus(\"listening, please speak...\");\n    }\n}\n\nif(gdjs._extensionVoiceRecognition == undefined) {\n    gdjs._extensionVoiceRecognition = new VoiceRecognition();\n}\n\n",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ],
          "parameters": [],
          "objectGroups": []
        },
        {
          "description": "Retrieves Voice Recognition Result Text.",
          "fullName": "Retrieves Voice Recognition Result Text",
          "functionType": "StringExpression",
          "group": "VoiceRecognition",
          "name": "RetrievetResultText",
          "private": false,
          "sentence": "",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": []
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": []
            },
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "eventsFunctionContext.returnValue = gdjs._extensionVoiceRecognition.getResultText();",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ],
          "parameters": [],
          "objectGroups": []
        },
        {
          "description": "Retrieves Voice Recognition Error Status.",
          "fullName": "Retrieves Voice Recognition Error Status",
          "functionType": "StringExpression",
          "group": "VoiceRecognition",
          "name": "RetrieveStatus",
          "private": false,
          "sentence": "",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": []
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": []
            },
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "eventsFunctionContext.returnValue = gdjs._extensionVoiceRecognition.getStatus();",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ],
          "parameters": [],
          "objectGroups": []
        },
        {
          "description": "Retrieves Voice Recognition Error.",
          "fullName": "Retrieves Voice Recognition Error",
          "functionType": "StringExpression",
          "group": "VoiceRecognition",
          "name": "RetrieveError",
          "private": false,
          "sentence": "",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": []
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": []
            },
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "eventsFunctionContext.returnValue = gdjs._extensionVoiceRecognition.getError();",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ],
          "parameters": [],
          "objectGroups": []
        },
        {
          "description": "Listen for speeches.",
          "fullName": "Listen for speeches",
          "functionType": "Action",
          "group": "VoiceRecognition",
          "name": "StartListening",
          "private": false,
          "sentence": "Listen for speeches (using language _PARAM1_)",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": []
            },
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "const Language = eventsFunctionContext.getArgument(\"language\");\r\n\r\nif(Language.trim() != \"\") {\r\n    gdjs._extensionVoiceRecognition.setLanguage(Language);\r\n}\r\n\r\ngdjs._extensionVoiceRecognition.startListening();",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Language (Optional, defaults to the browser language setting if none given)",
              "longDescription": "",
              "name": "language",
              "optional": false,
              "supplementaryInformation": "[\"ar-SA (Arabic)\",\"bn-BD (Bangla)\",\"bn-IN (Bangla)\",\"cs-CZ (Czech)\",\"da-DK (Danish)\",\"de-AT (German)\",\"de-CH (German)\",\"de-DE (German)\",\"el-GR (Greek)\",\"en-AU (English)\",\"en-CA (English)\",\"en-GB (English)\",\"en-IE (English)\",\"en-IN (English)\",\"en-NZ (English)\",\"en-US (English)\",\"en-ZA (English)\",\"es-AR (Spanish)\",\"es-CL (Spanish)\",\"es-CO (Spanish)\",\"es-ES (Spanish)\",\"es-MX (Spanish)\",\"es-US (Spanish)\",\"fi-FI (Finnish)\",\"fr-BE (French)\",\"fr-CA (French)\",\"fr-CH (French)\",\"fr-FR (French)\",\"he-IL (Hebrew)\",\"hi-IN (Hindi)\",\"hu-HU (Hungarian)\",\"id-ID (Indonesian)\",\"it-CH (Italian)\",\"it-IT (Italian)\",\"jp-JP (Japanese)\",\"ko-KR (Korean)\",\"nl-BE (Dutch)\",\"nl-NL (Dutch)\",\"no-NO (Norwegian)\",\"pl-PL (Polish)\",\"pt-BR (Portugese)\",\"pt-PT (Portugese)\",\"ro-RO (Romanian)\",\"ru-RU (Russian)\",\"sk-SK (Slovak)\",\"sv-SE (Swedish)\",\"ta-IN (Tamil)\",\"ta-LK (Tamil)\",\"th-TH (Thai)\",\"tr-TR (Turkish)\",\"zh-CN (Chinese)\",\"zh-HK (Chinese)\",\"zh-TW (Chinese)\"]",
              "type": "stringWithSelector"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "On Voice Recognition Success.",
          "fullName": "On Voice Recognition Success",
          "functionType": "Condition",
          "group": "VoiceRecognition",
          "name": "OnSuccess",
          "private": false,
          "sentence": "On Voice Recognition Success",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": []
            },
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "eventsFunctionContext.returnValue = gdjs._extensionVoiceRecognition.successStatus;",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ],
          "parameters": [],
          "objectGroups": []
        },
        {
          "description": "On Voice Recognition Error.",
          "fullName": "On Voice Recognition Error",
          "functionType": "Condition",
          "group": "VoiceRecognition",
          "name": "OnError",
          "private": false,
          "sentence": "On Voice Recognition Error",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": []
            },
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "eventsFunctionContext.returnValue = gdjs._extensionVoiceRecognition.errorStatus;",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ],
          "parameters": [],
          "objectGroups": []
        }
      ],
      "eventsBasedBehaviors": []
    }
  ],
  "externalLayouts": [],
  "externalSourceFiles": []
}